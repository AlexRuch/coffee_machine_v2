# Software Requirements Specification

## Введение (Introduction)
- #### Назначение (Purpose)

   Система "CoffeeMachine" представляет собой виртуальную модель кофейного автомата предоставляющего возможности:  
 -   просмотр каталога кофе  
 -   покупка кофе из представленного каталога  
 -   регистрация  
 -   пополнение счёта
 -   просмотр истории покупок  
 -   управление товарным запасом и каталогом

 Данный автомат поддерживает разделение по уровню доступа. Система содержит три уровня доступа : гость, покупатель, администратор.



- #### Сокращения и условные обозначения (Document conventions)

   Гость(guest) - пользователь не зарегестрирвоанный в системе   
   Покупатель(customer) - пользователь зарегестрированный в системе   
   Администратор(admin) - пользователь обладающий правами администратора в системе  
   Счет(account) - количество у.е. за которые покупатель может купить кофе  
   Транзакция - действие выполняемое со счетом покупательа  
   Продукт - кофе  
   Кабинет покупателя - раздел системы в котором отображаются транзакции и есть возможность пополнения счёта  
   Корзина - список продуктов которые выбрал покупатель для покупки.

## Общее описание (Overall Description)

- #### Product features  

Статус "гость" присваивается пользователю по умолчанию при обращении к системе.

"Гость" имеет следующие возможности:  
- просмотр ассортимента кофе представленного системой
- регистрация в системе
- вход в систему для изменения статуса на "покупатель"

Статус "покупатель" может иметь только зарегестрированный в системе пользователь. Для того, чтобы получить статус "покупатель", гость должен перейти на страницу входа и ввести логин и пароль которые он указал при регистрации.

"Покупатель" имеет следующие возможности:  
- добавление кофе из представленного системой каталога в корзину
- пополнение своего счета через кабинет покупателя
- просмотр истории своих покупок в кабинете покупателя
- покупка кофе содержащегося в корзине  

Статус "администратор" можно получить только перейдя по прямой ссылке в раздел администрирования и выполнив вход в данный раздел. Стату администратора нельзя получить при регистрации.

"Администратор" имеет следующие возможности:  
- пополнение количества кофе находящегося в системе
- получение информации о покупках сделанных покупателем (продукты, сумма покупки, дата)


   При входе на сайт, пользователь попадает на гостевую страницу, где он может ознакомиться с ассортиментом продуктов, предоставляемых системой, но покупки для гостя не доступны. Гостевая страница имеет ссылку на страницу входа в защищенную зону для покупателей.  
   Если пользователь не зарегестрирован в системе, то со страницы входа он может перейти на страницу регистрации в системе. При регистрации пользователь должен заполнить поля:  
   e-mail(он же будет логином для входа в защищенную зону для покупателей)  
   password  
   confirm password  
   При регистрации система проверяет e-mail на уникальность, совпадение полей password и confirm password. Если в системе уже будет зарегистрирован данный e-mail, то регистрации нового пользователя не произойдет и он будет перенаправлен на страницу ошибки. При несовпадении полей password и confirm password система выведет ошибку. При соблюдение условий регистрации, пользователь будет занесен в систему, на его счету будет находиться 0 у.е. и он будет перенаправлен на страницу входа в защищенную область для покупателей.  
   Попадая в защищенную область покупателей, пользователь получает возможность покупать продукты, пополнять свой баланс, просматривать свои транзакции.  
   Покупка осуществляется путем добавления продуктов в корзину и последующую их оплату у.е. со своего счета. При нехватке средств на оплату продуктов в корзине, покупателю выведется сообщение об ошибке в котором ему будет предложено убрать некоторые продукты из корзины или пополнить свой счёт.
   При успешной покупке,  происходит обновление данных о транзакциях, со счета покупателя списываются у.е. за продукты, на складе происходит обновление данных о количетве осташихся продуктов, корзина покупателя обнуляется, данные о покупке(количество и наименование продуктов, дата покупки) сохраняются в системе и доступны администратору.  
   В защещенную зону администратора можно попасть только явно указав адрес страницы. При переходе в защещенную зону администратора, система требует ввести логин и пароль. Администратор может быть назначен только напрямую через базу данных.   
   Система предоставляет возможность администратору отслеживать заказы и пополнять количество продуктов на складе.

- #### Требования к ПО (Operating environment)

   OS: Kali 2.0 linux/ CentOS 7  
   JDK 8  
   JAVA EE 7  
   Wildfly 10.x  
   Postgresql 9   
   jdbc-postgresql-driver

- ### Не функциональные требования (Non functional requirements)

   Безопасность должна быть реализована средствамии JAAS  
